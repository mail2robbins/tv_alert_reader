# Alert Source Configuration
# Set to 'TradingView' or 'ChartInk' to specify which alert source to process
ALERT_SOURCE=TradingView

# TradingView Webhook Configuration
TRADINGVIEW_WEBHOOK_SECRET=your_webhook_secret_here

# Database Configuration
DATABASE_URL=postgresql://username:password@hostname:port/database_name

# File Storage Configuration (fallback)
ALERTS_LOG_FILE=./data/alerts.log
ERROR_LOG_FILE=./data/errors.log

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# TP/SL Rebase Configuration
# When REBASE_TP_AND_SL is enabled, the system will automatically rebase (adjust) 
# Target Price and Stop Loss based on the actual entry price vs TradingView alert price.
# REBASE_THRESHOLD_PERCENTAGE sets the minimum price difference required to trigger rebase.
# Example: 0.1 = 0.1% (default), 0.5 = 0.5% (old default), 0.05 = 0.05% (very sensitive)
# Lower values = more sensitive to price differences, Higher values = less sensitive

# Network and Timeout Configuration
# API request timeout in milliseconds (default: 10000 = 10 seconds)
DHAN_API_TIMEOUT_MS=10000
# Rebase retry delay in milliseconds (default: 3000 = 3 seconds)
REBASE_RETRY_DELAY_MS=3000
# Maximum rebase retry attempts (default: 5)
REBASE_MAX_RETRIES=5
# Fallback to original alert price if entry price unavailable (default: false)
REBASE_FALLBACK_TO_ALERT_PRICE=false

# Dhan.co API Configuration - Account 1
# Get these from your Dhan.co account
DHAN_ACCESS_TOKEN_1=your_dhan_access_token_here
DHAN_CLIENT_ID_1=your_dhan_client_id_here
AVAILABLE_FUNDS_1=20000
LEVERAGE_1=2
MAX_POSITION_SIZE_1=0.1
MIN_ORDER_VALUE_1=1000
MAX_ORDER_VALUE_1=5000
STOP_LOSS_PERCENTAGE_1=0.01
TARGET_PRICE_PERCENTAGE_1=0.015
RISK_ON_CAPITAL_1=1.0
ENABLE_TRAILING_STOP_LOSS_1=true
MIN_TRAIL_JUMP_1=0.05
REBASE_TP_AND_SL_1=true
# Rebase threshold percentage (0.1 = 0.1%) - minimum price difference to trigger TP/SL rebase
REBASE_THRESHOLD_PERCENTAGE_1=0.1
# Order type for alert-based orders (MARKET, LIMIT, SL, SL_M)
DHAN_ORDER_TYPE_1=MARKET

# Dhan.co API Configuration - Account 2 (Optional)
DHAN_ACCESS_TOKEN_2=
DHAN_CLIENT_ID_2=
AVAILABLE_FUNDS_2=15000
LEVERAGE_2=1.5
MAX_POSITION_SIZE_2=0.08
MIN_ORDER_VALUE_2=1000
MAX_ORDER_VALUE_2=4000
STOP_LOSS_PERCENTAGE_2=0.012
TARGET_PRICE_PERCENTAGE_2=0.018
RISK_ON_CAPITAL_2=1.2
ENABLE_TRAILING_STOP_LOSS_2=false
MIN_TRAIL_JUMP_2=0.10
REBASE_TP_AND_SL_2=false
REBASE_THRESHOLD_PERCENTAGE_2=0.2
# Order type for alert-based orders (MARKET, LIMIT, SL, SL_M)
DHAN_ORDER_TYPE_2=LIMIT

# Dhan.co API Configuration - Account 3 (Optional)
DHAN_ACCESS_TOKEN_3=
DHAN_CLIENT_ID_3=
AVAILABLE_FUNDS_3=25000
LEVERAGE_3=2.5
MAX_POSITION_SIZE_3=0.12
MIN_ORDER_VALUE_3=1500
MAX_ORDER_VALUE_3=6000
STOP_LOSS_PERCENTAGE_3=0.008
TARGET_PRICE_PERCENTAGE_3=0.02
RISK_ON_CAPITAL_3=0.8
ENABLE_TRAILING_STOP_LOSS_3=true
MIN_TRAIL_JUMP_3=0.15
REBASE_TP_AND_SL_3=true
REBASE_THRESHOLD_PERCENTAGE_3=0.05
# Order type for alert-based orders (MARKET, LIMIT, SL, SL_M)
DHAN_ORDER_TYPE_3=MARKET

# Dhan.co API Configuration - Account 4 (Optional)
DHAN_ACCESS_TOKEN_4=
DHAN_CLIENT_ID_4=
AVAILABLE_FUNDS_4=10000
LEVERAGE_4=1.8
MAX_POSITION_SIZE_4=0.06
MIN_ORDER_VALUE_4=800
MAX_ORDER_VALUE_4=3000
STOP_LOSS_PERCENTAGE_4=0.015
TARGET_PRICE_PERCENTAGE_4=0.012
RISK_ON_CAPITAL_4=1.5
ENABLE_TRAILING_STOP_LOSS_4=false
MIN_TRAIL_JUMP_4=0.05
REBASE_TP_AND_SL_4=false
REBASE_THRESHOLD_PERCENTAGE_4=0.3
# Order type for alert-based orders (MARKET, LIMIT, SL, SL_M)
DHAN_ORDER_TYPE_4=SL

# Dhan.co API Configuration - Account 5 (Optional)
DHAN_ACCESS_TOKEN_5=
DHAN_CLIENT_ID_5=
AVAILABLE_FUNDS_5=30000
LEVERAGE_5=3
MAX_POSITION_SIZE_5=0.15
MIN_ORDER_VALUE_5=2000
MAX_ORDER_VALUE_5=8000
STOP_LOSS_PERCENTAGE_5=0.01
TARGET_PRICE_PERCENTAGE_5=0.025
RISK_ON_CAPITAL_5=1.0
ENABLE_TRAILING_STOP_LOSS_5=true
MIN_TRAIL_JUMP_5=0.20
REBASE_TP_AND_SL_5=true
REBASE_THRESHOLD_PERCENTAGE_5=0.15
# Order type for alert-based orders (MARKET, LIMIT, SL, SL_M)
DHAN_ORDER_TYPE_5=SL_M

# Auto Order Placement (Optional)
# Set to 'true' to automatically place orders when BUY signals are received
AUTO_PLACE_ORDER=false
# Enable auto-placement for SELL signals (default: false)
AUTO_PLACE_SELL_ORDER=false
DEFAULT_ORDER_QUANTITY=1
DHAN_EXCHANGE_SEGMENT=NSE_EQ
DHAN_PRODUCT_TYPE=CNC
DHAN_ORDER_TYPE=MARKET

# External Webhook Forwarding (Optional)
# Configure up to 10 external webhook URLs to forward TradingView alerts to
# The original JSON payload from TradingView will be forwarded to these URLs
# Example: Discord, Slack, Telegram, or custom API endpoints
EXTERNAL_WEBHOOK_URL_1=https://discord.com/api/webhooks/YOUR_DISCORD_WEBHOOK_URL
EXTERNAL_WEBHOOK_URL_2=https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK_URL
EXTERNAL_WEBHOOK_URL_3=https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage
# EXTERNAL_WEBHOOK_URL_4=
# EXTERNAL_WEBHOOK_URL_5=
# EXTERNAL_WEBHOOK_URL_6=
# EXTERNAL_WEBHOOK_URL_7=
# EXTERNAL_WEBHOOK_URL_8=
# EXTERNAL_WEBHOOK_URL_9=
# EXTERNAL_WEBHOOK_URL_10=

# Legacy Configuration (for backward compatibility)
# These will be used if the numbered versions are not set
DHAN_ACCESS_TOKEN=your_dhan_access_token_here
DHAN_CLIENT_ID=your_dhan_client_id_here
AVAILABLE_FUNDS=20000
LEVERAGE=2
MAX_POSITION_SIZE=0.1
MIN_ORDER_VALUE=1000
MAX_ORDER_VALUE=5000
STOP_LOSS_PERCENTAGE=0.01
TARGET_PRICE_PERCENTAGE=0.015
RISK_ON_CAPITAL=1.0
ENABLE_TRAILING_STOP_LOSS=true
MIN_TRAIL_JUMP=0.05
REBASE_TP_AND_SL=true
REBASE_THRESHOLD_PERCENTAGE=0.1
